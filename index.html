<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Rituale — Combinazione di Simboli</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&display=swap');

  :root{
    --bg:#050505;
    --fg:#e6e6e6;
    --muted:#7a7a7a;
    --accent:#2bff88;
    --accent2:#6bffda;
    --card:#0d0d0d;
    --ok:#22c55e;
    --err:#ff4444;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:radial-gradient(circle at 50% 20%, #111 0%, #000 80%);
    color:var(--fg);
    font-family: 'Cinzel Decorative', serif;
    display:flex; align-items:center; justify-content:center;
    overflow:hidden;
  }

  .wrap{ width:min(1600px, 96vw); text-align:center; position:relative; }

  h1{
    font-size:clamp(28px,4vw,48px);
    margin:0 0 10px;
    letter-spacing:.08em;
    color:var(--accent);
    text-shadow:0 0 12px var(--accent), 0 0 28px var(--accent2);
  }
  .sub{ color:var(--muted); margin:0 0 24px; font-size:1.2rem; }

  .panel{
    display:grid; grid-template-columns:repeat(4, 1fr); gap:28px;
    padding:24px; border-radius:20px;
    background:rgba(20,20,20,0.85);
    box-shadow: 0 0 40px rgba(43,255,136,.25), inset 0 0 20px rgba(43,255,136,.15);
  }

  .slot{
    background:radial-gradient(300px 300px at 50% 30%, rgba(43,255,136,.08), transparent 70%), var(--card);
    border:2px solid rgba(43,255,136,.3);
    border-radius:22px;
    padding:18px;
    display:flex; align-items:center; justify-content:center; gap:14px;
    position:relative; min-height:340px;
    box-shadow:inset 0 0 20px rgba(43,255,136,.15);
  }

  .symbol{
    width:300px; height:300px; border-radius:18px;
    background:rgba(0,0,0,.6);
    display:flex; align-items:center; justify-content:center;
    font-size:180px; font-weight:800; letter-spacing:.06em;
    border:1px solid rgba(43,255,136,.4);
    box-shadow: 0 0 20px rgba(43,255,136,.15), inset 0 0 15px rgba(43,255,136,.1);
  }

  .arrow{
    width:60px; height:60px;
    display:flex; align-items:center; justify-content:center;
    font-size:32px;
    background:rgba(30,30,30,.8);
    border:1px solid rgba(43,255,136,.3);
    border-radius:12px;
    cursor:pointer;
    color:var(--fg);
    transition: all .2s ease;
  }
  .arrow:hover{ background:rgba(43,255,136,.15); }

  .action{ margin:28px 0 10px; display:flex; gap:16px; justify-content:center; }

  button{
    appearance:none; border:0; cursor:pointer;
    border-radius:12px; padding:14px 20px; font-weight:700;
    background:rgba(30,30,30,.9);
    color:var(--fg); border:2px solid rgba(43,255,136,.3);
    font-family:'Cinzel Decorative', serif;
    font-size:1.1rem;
    transition:all .2s ease;
  }
  button:hover{ background:rgba(43,255,136,.15); }

  .msg{ min-height:36px; font-size:1.4rem; margin-top:10px; }
  .success{ color:var(--ok); text-shadow:0 0 10px var(--ok); animation: pop .6s ease; }
  .fail{ color:var(--err); text-shadow:0 0 8px var(--err); }

  @keyframes pop { from{ transform:scale(.96); opacity:.4 } to{ transform:scale(1); opacity:1 } }

  .footer{
    margin-top:26px; color:var(--accent2); font-size:1.2rem;
    text-shadow:0 0 6px rgba(43,255,136,.4);
  }

  @media (max-width: 1200px){
    .panel{ grid-template-columns:repeat(2, 1fr); }
  }
</style>
</head>
<body>
  <div class="wrap">
    <h1>Combinazione di Simboli</h1>
    <p class="sub">Allinea i quattro simboli corretti per risvegliare l'oscuro portale.</p>

    <div class="panel" id="panel"></div>

    <div class="action">
      <button id="shuffle">Mescola</button>
      <button id="check">Verifica</button>
    </div>
    <div id="message" class="msg"></div>

    <div class="footer" id="hintBox"></div>
  </div>

<script>
// =====================
// CONFIGURAZIONE
// =====================
// Sostituisci le immagini con i tuoi file (in /media della repo)
const SYMBOLS = [
  { id: 'candela', view: '<img src="media/candela.png" alt="candela" style="width:280px;height:280px">' },
  { id: 'teschio', view: '<img src="media/teschio.png" alt="teschio" style="width:280px;height:280px">' },
  { id: 'osso',    view: '<img src="media/osso.png"    alt="osso"    style="width:280px;height:280px">' },
  { id: 'runa',    view: '<img src="media/runa.png"    alt="runa"    style="width:280px;height:280px">' },
  { id: 'pugnale', view: '<img src="media/pugnale.png" alt="pugnale" style="width:280px;height:280px">' }
];

// Sequenza corretta (modifica con gli id sopra)
const TARGET = ['candela','teschio','runa','osso'];

// Numero di slot
const SLOTS = 4;

// Suggerimenti random
const HINTS = [
  "Spesso gli oggetti dei rituali si nascondono nelle stanze più buie.",
  "Le scope delle streghe nascondono sempre qualcosa.",
  "Una volta ho sentito la storia di una \"casa del dolore\", forse si parlava di qualcosa di interessante?"
];

// =====================
// LOGICA
// =====================
const panel   = document.getElementById('panel');
const message = document.getElementById('message');
const hintBox = document.getElementById('hintBox');
let state = [];

function createSlot(i){
  const wrap = document.createElement('div');
  wrap.className = 'slot';

  const left = document.createElement('div');
  left.className = 'arrow'; left.textContent = '◀';

  const sym = document.createElement('div');
  sym.className = 'symbol';

  const right = document.createElement('div');
  right.className = 'arrow'; right.textContent = '▶';

  wrap.appendChild(left); wrap.appendChild(sym); wrap.appendChild(right);

  state[i] = Math.floor(Math.random() * SYMBOLS.length);
  renderSymbol(sym, state[i]);

  left.addEventListener('click', ()=>{
    state[i] = (state[i] - 1 + SYMBOLS.length) % SYMBOLS.length;
    renderSymbol(sym, state[i]); message.textContent = '';
  });
  right.addEventListener('click', ()=>{
    state[i] = (state[i] + 1) % SYMBOLS.length;
    renderSymbol(sym, state[i]); message.textContent = '';
  });

  return wrap;
}

function renderSymbol(el, idx){ el.innerHTML = SYMBOLS[idx].view; }

function build(){
  panel.innerHTML=''; state = [];
  for(let i=0;i<SLOTS;i++) panel.appendChild(createSlot(i));
}

function shuffle(){
  for (let i=0;i<SLOTS;i++) state[i] = Math.floor(Math.random()*SYMBOLS.length);
  [...panel.children].forEach((slotEl, i)=> renderSymbol(slotEl.querySelector('.symbol'), state[i]));
  message.textContent = '';
}

function check(){
  const pickedIds = state.map(idx => SYMBOLS[idx].id);
  const ok = pickedIds.length === TARGET.length && pickedIds.every((id, i)=> id === TARGET[i]);
  if(ok){
    message.className = 'msg success';
    message.textContent = 'bravo';
    confetti();
  } else {
    message.className = 'msg fail';
    message.textContent = 'sbagliato';
  }
}

// mini-confetti spettrali
function confetti(){
  const n = 60;
  for (let i=0;i<n;i++){
    const p = document.createElement('div');
    const size = 8 + Math.random()*10;
    p.style.position='fixed'; p.style.left=(Math.random()*100)+'vw'; p.style.top='-10px';
    p.style.width=size+'px'; p.style.height=size+'px';
    p.style.background = Math.random()>.5 ? 'var(--accent)' : 'var(--accent2)';
    p.style.borderRadius='50%'; p.style.opacity=.9; p.style.zIndex=9999;
    document.body.appendChild(p);
    const x = (Math.random()*2 -1) * 100;
    const dur = 2000 + Math.random()*1500;
    p.animate([{transform:`translate(${x}px, 0)`},{transform:`translate(${x*1.2}px, 95vh)`}],
              {duration:dur, easing:'cubic-bezier(.2,.7,.2,1)'}).onfinish = ()=> p.remove();
  }
}

// Avvio
document.getElementById('shuffle').addEventListener('click', shuffle);
document.getElementById('check').addEventListener('click', check);
build();

// Suggerimento casuale
hintBox.textContent = "Suggerimento: " + HINTS[Math.floor(Math.random()*HINTS.length)];
</script>
</body>
</html>
